{% extends "./plantilla.html" %}
{% block body %}


<div class="container-fluid mt-12">
  <div class="card-title text-center">
    <h3><b>Listado de Clientes</b></h3>
  </div>
</div>
<div class="container">
  <div class="d-flex justify-content-end mb-4">
    <a href="" class="btn btn-primary">Agregar Nuevo</a>
  </div>
</div>

<div class="container">
  <div class="table-responsive">
    <table class="table table-bordered table-striped table-hover" id="tbl-clientes">
      <thead>
        <tr>
          <th class="tablecolor">ID</th>
          <th class="tablecolor">Cédula</th>
          <th class="tablecolor">Apellido</th>
          <th class="tablecolor">Nombre</th>
          <th class="tablecolor">Dirección</th>
          <th class="tablecolor">Teléfono</th>
          <th class="tablecolor">Email</th>
          <th class="tablecolor">Foto</th>
          <th class="tablecolor">Acciones</th>
        </tr>
      </thead>
      <tbody>
        {% for cliente in clientes %}
        <tr>
          <td>{{ cliente.id }}</td>
          <td>{{ cliente.cedula }}</td>
          <td>{{ cliente.apellido }}</td>
          <td>{{ cliente.nombre }}</td>
          <td>{{ cliente.direccion }}</td>
          <td>{{ cliente.telefono }}</td>
          <td>{{ cliente.email }}</td>
          <td class="text-center">
            {% if cliente.foto %}
            <img src="{{ cliente.foto.url }}" alt="Foto del cliente" class="img-thumbnail img-square" style="width: 60px; height: 60px; object-fit: cover; border-radius: 0;">
            <div class="d-block text-center mt-2"> <!-- div class="btn-group mt-2" -->
              <button type="button" class="btn btn-primary btn-sm dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                Opciones
              </button>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="{{ cliente.foto.url }}" target="_blank">Ver Foto</a></li>
                <li><a class="dropdown-item" href="{{ cliente.foto.url }}" download>Descargar Foto</a></li>
              </ul>
            </div>
            {% else %}
            No hay foto disponible
            {% endif %}
          </td>
          <td>
            <a href="{% url 'editarCliente' cliente.id %}" class="btn btn-warning">
              <i class="fas fa-edit"></i>
            </a>
            <a href="{% url 'eliminarCliente' cliente.id %}" onclick="return confirm('¿Estás seguro?')" class="btn btn-danger">
              <i class="fas fa-trash-alt"></i>
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<script type="text/javascript">
  $('#tbl-clientes').DataTable({
    "language": {
      "url": "https://cdn.datatables.net/plug-ins/1.10.24/i18n/Spanish.json"
    },
    dom: 'Bfrtip',
    buttons: [
      {
        extend: 'pdfHtml5',
        messageTop: 'REPORTE DE CLIENTES - DJANGO Y DATATABLES.'
      },
      'print',
      'csv'
    ]
  });
</script>

<!-- Incluir jQuery y Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js"></script>


<style>
  .table td, .table th {
    font-size: 1.2rem; /* Ajusta el tamaño del texto en las celdas   */
  }

  .table th.tablecolor {
    background-color: #76d7c4 !important;
    color: dark !important;
    font-size: 1.5rem; /* white Ajusta el tamaño del texto en las cabeceras */
  }


  .table-responsive {
    margin: auto;
  }
</style>

{% endblock %}
